# Visualization Guide - ARP Spoofing Detection

## Overview

This document describes all visualizations generated by the ARP spoofing detection system.

## How to Generate Plots

```bash
# Run the visualization script
python scripts/generate_plots.py

# Or generate during training
python scripts/train_model.py  # Automatically generates key plots
```

All plots are saved to: `outputs/plots/`

---

## Generated Visualizations

### 1. Exploratory Data Analysis (EDA)

#### 1.1 Class Distribution
**File:** `class_distribution.png`  
**Description:** Shows the balance between normal and attack samples in the dataset.  
**Contains:**
- Bar chart showing count of each class
- Pie chart showing percentage distribution
- Used in: Section 2.1 of PROJECT_DELIVERABLES.md

**Key Insight:** Perfectly balanced dataset (50-50 split)

---

#### 1.2 Feature Correlation Matrix
**File:** `correlation_matrix.png`  
**Description:** Heatmap showing correlations between all features.  
**Contains:**
- Color-coded correlation coefficients (-1 to +1)
- Highlights feature relationships
- Used in: Section 2.3 of PROJECT_DELIVERABLES.md

**Key Insight:** Identifies highly correlated features and redundancy

---

#### 1.3 Feature Distributions
**File:** `feature_distributions.png`  
**Description:** Distribution plots for top 6 features separated by class.  
**Contains:**
- Histograms comparing normal vs attack traffic
- 6 subplots (3x2 grid)
- Used in: Section 2.3 of PROJECT_DELIVERABLES.md

**Key Insight:** Shows how attack traffic differs from normal traffic

---

### 2. Model Performance Evaluation

#### 2.1 Model Comparison
**File:** `model_comparison.png`  
**Description:** Side-by-side comparison of all models across 4 metrics.  
**Contains:**
- 4 subplots: Accuracy, Precision, Recall, F1-Score
- Horizontal bar charts for easy comparison
- Color-coded by performance (green = high, red = low)
- Used in: Section 5.2 of PROJECT_DELIVERABLES.md

**Key Insight:** Random Forest outperforms all other models

---

#### 2.2 Confusion Matrices (6 models)
**Files:**
- `confusion_matrix_random_forest.png` ⭐ Best Model
- `confusion_matrix_gradient_boosting.png`
- `confusion_matrix_neural_network.png`
- `confusion_matrix_logistic_regression.png`
- `confusion_matrix_isolation_forest.png`
- `confusion_matrix_hybrid_ensemble.png` (if applicable)

**Description:** Shows true vs predicted classifications for each model.  
**Contains:**
- 2x2 matrix (Normal/Attack)
- TP, TN, FP, FN counts
- Performance metrics box (Accuracy, Precision, Recall, F1)
- Used in: Section 5.4 of PROJECT_DELIVERABLES.md

**Key Insight:** Visual representation of misclassifications

---

#### 2.3 ROC Curves
**File:** `roc_curves.png`  
**Description:** Receiver Operating Characteristic curves for all models.  
**Contains:**
- Multiple curves (one per model)
- AUC scores in legend
- Diagonal reference line (random classifier)
- Used in: Section 5.4 of PROJECT_DELIVERABLES.md

**Key Insight:** Random Forest achieves AUC of 0.9881 (excellent)

---

#### 2.4 Feature Importance
**File:** `feature_importance.png`  
**Description:** Ranking of top 20 features by importance for Random Forest.  
**Contains:**
- Horizontal bar chart
- Color gradient (important features highlighted)
- Importance scores labeled
- Used in: Section 5.6 of PROJECT_DELIVERABLES.md

**Key Insight:** packet_rate and duration_ms are most predictive

---

### 3. Real-Time Detection Results

#### 3.1 Detection Timeline
**File:** `detection_timeline.png`  
**Description:** Packet-by-packet detection results over time.  
**Contains:**
- **Top plot:** Predictions vs true labels scatter plot
  - Green = Normal traffic
  - Red = Attack traffic
  - X marks = True labels
  - O marks = Predictions
  - Orange vertical lines = Incorrect predictions
- **Bottom plot:** Confidence scores bar chart
  - Color-coded by prediction (green/red)
  - Alert level threshold lines
- Used in: Section 6.3 of PROJECT_DELIVERABLES.md

**Key Insight:** Shows detection accuracy and confidence over time

---

#### 3.2 Alert Level Distribution
**File:** `alert_level_distribution.png`  
**Description:** Distribution of alert severity levels.  
**Contains:**
- Bar chart showing counts per alert level
- Pie chart showing percentages
- 4 levels: SAFE, MEDIUM, HIGH, CRITICAL
- Color-coded (green → red)
- Used in: Section 6.3 of PROJECT_DELIVERABLES.md

**Key Insight:** 51% of detections are HIGH or CRITICAL alerts

---

## Plot Specifications

### Technical Details

| Specification | Value |
|--------------|-------|
| Format | PNG |
| DPI | 300 (publication quality) |
| Figure Size | 10x6 inches (default) |
| Color Scheme | Seaborn palette |
| Style | seaborn-v0_8-darkgrid |
| Font Size | Title: 14-16pt, Labels: 12-13pt |

### Color Coding

| Element | Color | Meaning |
|---------|-------|---------|
| Normal Traffic | Green (#2ecc71) | Benign |
| Attack Traffic | Red (#e74c3c) | Malicious |
| SAFE Alert | Green | Low risk |
| MEDIUM Alert | Yellow (#f39c12) | Moderate risk |
| HIGH Alert | Orange (#e67e22) | High risk |
| CRITICAL Alert | Red (#e74c3c) | Critical risk |

---

## Usage in Documents

### PROJECT_DELIVERABLES.md

All plots are referenced with markdown image syntax:

```markdown
![Plot Title](../outputs/plots/filename.png)
*Figure X.Y: Caption describing the plot*
```

### Presentation/Report

1. **For PowerPoint:** Copy PNG files directly
2. **For LaTeX:** Use `\includegraphics{outputs/plots/filename.png}`
3. **For Word:** Insert → Pictures → Select PNG files

---

## Customization

### Modify Plot Parameters

Edit `src/visualizer.py`:

```python
# Change figure size
plt.rcParams['figure.figsize'] = (12, 8)  # Width, Height in inches

# Change DPI
plt.rcParams['figure.dpi'] = 300

# Change color palette
sns.set_palette("Set2")
```

### Generate Individual Plots

```python
from src.visualizer import Visualizer

viz = Visualizer(output_dir="outputs/plots")

# Generate specific plot
viz.plot_class_distribution(y_train, "My Custom Title")
viz.plot_confusion_matrix(y_test, y_pred, "Random Forest")
```

---

## Troubleshooting

### Issue: Plots not generating

**Solution:**
```bash
# Ensure matplotlib backend is set
export MPLBACKEND=Agg

# Install missing dependencies
pip install matplotlib seaborn
```

### Issue: Low resolution plots

**Solution:**
Edit `config/config.yaml`:
```yaml
output:
  plot_dpi: 600  # Increase from 300
```

### Issue: Plots look different

**Solution:**
```bash
# Update matplotlib and seaborn
pip install --upgrade matplotlib seaborn
```

---

## Plot Checklist

Before submission, verify all plots are generated:

- [ ] ✓ class_distribution.png
- [ ] ✓ correlation_matrix.png
- [ ] ✓ feature_distributions.png
- [ ] ✓ model_comparison.png
- [ ] ✓ confusion_matrix_random_forest.png
- [ ] ✓ confusion_matrix_gradient_boosting.png
- [ ] ✓ confusion_matrix_neural_network.png
- [ ] ✓ confusion_matrix_logistic_regression.png
- [ ] ✓ confusion_matrix_isolation_forest.png
- [ ] ✓ roc_curves.png
- [ ] ✓ feature_importance.png
- [ ] ✓ detection_timeline.png
- [ ] ✓ alert_level_distribution.png

**Total: 13 visualization files**

---

## Examples

### Class Distribution Output
```
[INFO] Creating class distribution plots...
[INFO] ✓ Saved: outputs/plots/class_distribution.png
```

### Confusion Matrix Output
```
[INFO] Creating confusion matrix for Random Forest...
[INFO] ✓ Saved: outputs/plots/confusion_matrix_random_forest.png
```

### Complete Generation Log
```
================================================================
GENERATING ALL VISUALIZATIONS
================================================================
[INFO] Creating class distribution plots...
[INFO] ✓ Saved: outputs/plots/class_distribution.png
[INFO] Creating correlation heatmap...
[INFO] ✓ Saved: outputs/plots/correlation_matrix.png
[INFO] Creating feature distribution plots for 6 features...
[INFO] ✓ Saved: outputs/plots/feature_distributions.png
[INFO] Creating model comparison plot...
[INFO] ✓ Saved: outputs/plots/model_comparison.png
[INFO] Creating confusion matrix for Random Forest...
[INFO] ✓ Saved: outputs/plots/confusion_matrix_random_forest.png
... (more models)
[INFO] Creating ROC curves for 5 models...
[INFO] ✓ Saved: outputs/plots/roc_curves.png
[INFO] Creating feature importance plot for Random Forest...
[INFO] ✓ Saved: outputs/plots/feature_importance.png
[INFO] Creating detection timeline plot...
[INFO] ✓ Saved: outputs/plots/detection_timeline.png
[INFO] Creating alert level distribution plot...
[INFO] ✓ Saved: outputs/plots/alert_level_distribution.png
================================================================
ALL VISUALIZATIONS GENERATED SUCCESSFULLY
Plots saved to: outputs/plots
================================================================
```

---

## References

- Matplotlib Documentation: https://matplotlib.org/
- Seaborn Gallery: https://seaborn.pydata.org/examples/
- Best Practices: https://clauswilke.com/dataviz/

---

**Last Updated:** October 2025  
**Visualization Module:** `src/visualizer.py`  
**Generation Script:** `scripts/generate_plots.py`
